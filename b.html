<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #wrap {
        display: flex;
        gap: 20px;
        justify-content: center;
      }
      #wrap p {
        position: relative;
        top: 0;
        width: 100px;
        height: 100px;
        background: pink;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
      }
    </style>
  </head>
  <body>
    <button class="btn">로또번호 추첨</button>
    <div id="wrap"></div>
    <script>
      const btn = document.querySelector(".btn");
      const wrap = document.querySelector("#wrap");
      for (let i = 0; i < 4; i++) {
        let ball = document.createElement("p");
        ball.innerText = "?";
        ball.style.background = "lightpink";
        wrap.append(ball);
      }

      btn.addEventListener("click", function () {
        let color = [
          "hotpink",
          "yellow",
          "green",
          "blue",
          "yellowgreen",
          "orange",
          "orangered",
          "red",
        ];
        let numberArr = [];
        let colorArr = [];
        while (true) {
          let number = Math.floor(Math.random() * 45);

          numberArr.indexOf(number) == -1
            ? numberArr.push(number)
            : (number = Math.floor(Math.random() * 45));

          if (numberArr.length == 4) break;
        }

        for (let i = 0; i < 4; i++) {
          const ball = document.querySelector("p");
          ball.style.transition = "margin-top 1.5s";

          const ballColor = Math.floor(Math.random() * 4);

          ball.style.background = color[ballColor];

          setTimeout(function () {
            ball.innerText = numberArr[i];
          }, i * 1000);
          wrap.append(ball);
        }

        function moveBall(index) {
          let ball = document.querySelectorAll("p")[index];
          ball.style.marginTop = "400px";
        }

        for (let num = 0; num < 4; num++) {
          let ballShow = setTimeout(function () {
            moveBall(num);
          }, num * 1000);
        }

        while (true) {
          let number = Math.floor(Math.random() * 8);

          colorArr.indexOf(number) == -1
            ? colorArr.push(number)
            : (number = Math.floor(Math.random() * 4));
          if (colorArr.length == 4) break;

          console.log(colorArr);
        }

        document.querySelectorAll("p").forEach(function (el, index) {
          el.style.backgroundColor = color[colorArr[index]];
          console.log(colorArr[index]);
        });
      });
    </script>
  </body>
</html>
